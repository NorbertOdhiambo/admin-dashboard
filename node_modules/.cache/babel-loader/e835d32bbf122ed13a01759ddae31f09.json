{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Desktop/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/HP/Desktop/dashboard/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/HP/Desktop/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HP/Desktop/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import ScrollToBottom from\"react-scroll-to-bottom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChattingApp=function ChattingApp(_ref){var socket=_ref.socket,username=_ref.username,room=_ref.room;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentMessage=_useState2[0],setCurrentMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messageList=_useState4[0],setMessageList=_useState4[1];var sendMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var messageData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(currentMessage!==\"\")){_context.next=6;break;}messageData={room:room,author:username,message:currentMessage,time:new Date(Date.now()).getHours()+\":\"+new Date(Date.now()).getMinutes()};_context.next=4;return socket.emit(\"send_message\",messageData);case 4:setMessageList(function(list){return[].concat(_toConsumableArray(list),[messageData]);});setCurrentMessage(\"\");case 6:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(){return _ref2.apply(this,arguments);};}();useEffect(function(){socket.on(\"receive_message\",function(data){setMessageList(function(list){return[].concat(_toConsumableArray(list),[data]);});});},[socket]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-window\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Live Chat\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:/*#__PURE__*/_jsx(ScrollToBottom,{className:\"message-container\",children:messageList.map(function(messageContent){return/*#__PURE__*/_jsx(\"div\",{className:\"message\",id:username===messageContent.author?\"you\":\"other\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:/*#__PURE__*/_jsx(\"p\",{children:messageContent.message})}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-meta\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"time\",children:messageContent.time}),/*#__PURE__*/_jsx(\"p\",{id:\"author\",children:messageContent.author})]})]})});})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-footer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:currentMessage,placeholder:\"\",onChange:function onChange(event){setCurrentMessage(event.target.value);},onKeyPress:function onKeyPress(event){event.key===\"Enter\"&&sendMessage();}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"\\u25BA\"})]})]});};export default ChattingApp;","map":{"version":3,"names":["React","useEffect","useState","ScrollToBottom","ChattingApp","socket","username","room","currentMessage","setCurrentMessage","messageList","setMessageList","sendMessage","messageData","author","message","time","Date","now","getHours","getMinutes","emit","list","on","data","map","messageContent","event","target","value","key"],"sources":["C:/Users/HP/Desktop/dashboard/src/views/ChattingApp.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\n\r\nconst ChattingApp = ({ socket, username, room }) => {\r\n\r\n    const [currentMessage, setCurrentMessage] = useState(\"\");\r\n    const [messageList, setMessageList] = useState([]);\r\n\r\n    const sendMessage = async () => {\r\n        if (currentMessage !== \"\") {\r\n            const messageData = {\r\n                room: room,\r\n                author: username,\r\n                message: currentMessage,\r\n                time:\r\n                    new Date(Date.now()).getHours() +\r\n                    \":\" +\r\n                    new Date(Date.now()).getMinutes(),\r\n            };\r\n\r\n            await socket.emit(\"send_message\", messageData);\r\n            setMessageList((list) => [...list, messageData]);\r\n            setCurrentMessage(\"\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        socket.on(\"receive_message\", (data) => {\r\n            setMessageList((list) => [...list, data]);\r\n        });\r\n    }, [socket]);\r\n\r\n    return (\r\n        <div className=\"chat-window\">\r\n            <div className=\"chat-header\">\r\n                <p>Live Chat</p>\r\n            </div>\r\n            <div className=\"chat-body\">\r\n                <ScrollToBottom className=\"message-container\">\r\n                    {messageList.map((messageContent) => {\r\n                        return (\r\n                            <div\r\n                                className=\"message\"\r\n                                id={username === messageContent.author ? \"you\" : \"other\"}\r\n                            >\r\n                                <div>\r\n                                    <div className=\"message-content\">\r\n                                        <p>{messageContent.message}</p>\r\n                                    </div>\r\n                                    <div className=\"message-meta\">\r\n                                        <p id=\"time\">{messageContent.time}</p>\r\n                                        <p id=\"author\">{messageContent.author}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </ScrollToBottom>\r\n            </div>\r\n            <div className=\"chat-footer\">\r\n                <input\r\n                    type=\"text\"\r\n                    value={currentMessage}\r\n                    placeholder=\"\"\r\n                    onChange={(event) => {\r\n                        setCurrentMessage(event.target.value);\r\n                    }}\r\n                    onKeyPress={(event) => {\r\n                        event.key === \"Enter\" && sendMessage();\r\n                    }}\r\n                />\r\n                <button onClick={sendMessage}>&#9658;</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChattingApp"],"mappings":"oeAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,eAAP,KAA2B,wBAA3B,C,wFAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,MAAgC,IAA7BC,OAA6B,MAA7BA,MAA6B,CAArBC,QAAqB,MAArBA,QAAqB,CAAXC,IAAW,MAAXA,IAAW,CAEhD,cAA4CL,QAAQ,CAAC,EAAD,CAApD,wCAAOM,cAAP,eAAuBC,iBAAvB,eACA,eAAsCP,QAAQ,CAAC,EAAD,CAA9C,yCAAOQ,WAAP,eAAoBC,cAApB,eAEA,GAAMC,YAAW,6FAAG,0JACZJ,cAAc,GAAK,EADP,0BAENK,WAFM,CAEQ,CAChBN,IAAI,CAAEA,IADU,CAEhBO,MAAM,CAAER,QAFQ,CAGhBS,OAAO,CAAEP,cAHO,CAIhBQ,IAAI,CACA,GAAIC,KAAJ,CAASA,IAAI,CAACC,GAAL,EAAT,EAAqBC,QAArB,GACA,GADA,CAEA,GAAIF,KAAJ,CAASA,IAAI,CAACC,GAAL,EAAT,EAAqBE,UAArB,EAPY,CAFR,uBAYNf,OAAM,CAACgB,IAAP,CAAY,cAAZ,CAA4BR,WAA5B,CAZM,QAaZF,cAAc,CAAC,SAACW,IAAD,qCAAcA,IAAd,GAAoBT,WAApB,IAAD,CAAd,CACAJ,iBAAiB,CAAC,EAAD,CAAjB,CAdY,sDAAH,kBAAXG,YAAW,2CAAjB,CAkBAX,SAAS,CAAC,UAAM,CACZI,MAAM,CAACkB,EAAP,CAAU,iBAAV,CAA6B,SAACC,IAAD,CAAU,CACnCb,cAAc,CAAC,SAACW,IAAD,qCAAcA,IAAd,GAAoBE,IAApB,IAAD,CAAd,CACH,CAFD,EAGH,CAJQ,CAIN,CAACnB,MAAD,CAJM,CAAT,CAMA,mBACI,aAAK,SAAS,CAAC,aAAf,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,gCADJ,EADJ,cAII,YAAK,SAAS,CAAC,WAAf,uBACI,KAAC,cAAD,EAAgB,SAAS,CAAC,mBAA1B,UACKK,WAAW,CAACe,GAAZ,CAAgB,SAACC,cAAD,CAAoB,CACjC,mBACI,YACI,SAAS,CAAC,SADd,CAEI,EAAE,CAAEpB,QAAQ,GAAKoB,cAAc,CAACZ,MAA5B,CAAqC,KAArC,CAA6C,OAFrD,uBAII,oCACI,YAAK,SAAS,CAAC,iBAAf,uBACI,mBAAIY,cAAc,CAACX,OAAnB,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,cAAf,wBACI,UAAG,EAAE,CAAC,MAAN,UAAcW,cAAc,CAACV,IAA7B,EADJ,cAEI,UAAG,EAAE,CAAC,QAAN,UAAgBU,cAAc,CAACZ,MAA/B,EAFJ,GAJJ,GAJJ,EADJ,CAgBH,CAjBA,CADL,EADJ,EAJJ,cA0BI,aAAK,SAAS,CAAC,aAAf,wBACI,cACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAEN,cAFX,CAGI,WAAW,CAAC,EAHhB,CAII,QAAQ,CAAE,kBAACmB,KAAD,CAAW,CACjBlB,iBAAiB,CAACkB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAjB,CACH,CANL,CAOI,UAAU,CAAE,oBAACF,KAAD,CAAW,CACnBA,KAAK,CAACG,GAAN,GAAc,OAAd,EAAyBlB,WAAW,EAApC,CACH,CATL,EADJ,cAYI,eAAQ,OAAO,CAAEA,WAAjB,oBAZJ,GA1BJ,GADJ,CA2CH,CAxED,CA0EA,cAAeR,YAAf"},"metadata":{},"sourceType":"module"}