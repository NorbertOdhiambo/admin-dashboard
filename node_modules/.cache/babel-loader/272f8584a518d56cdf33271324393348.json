{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\dashboard\\\\src\\\\context\\\\UserContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext();\nexport const Axios = axios.create({\n  baseURL: 'http://localhost:8000/api_dashb/'\n});\nexport const UserContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [theUser, setUser] = useState(null);\n  const [wait, setWait] = useState(false);\n\n  const registerUser = async _ref2 => {\n    let {\n      name,\n      email,\n      password\n    } = _ref2;\n    setWait(true);\n\n    try {\n      const {\n        data\n      } = await Axios.post('register.php', {\n        first_name,\n        last_name,\n        email,\n        username,\n        password\n      });\n      setWait(false);\n      return data;\n    } catch (err) {\n      setWait(false);\n      return {\n        success: 0,\n        message: 'Server Error!'\n      };\n    }\n  };\n\n  const loginUser = async _ref3 => {\n    let {\n      email,\n      password\n    } = _ref3;\n    setWait(true);\n\n    try {\n      const {\n        data\n      } = await Axios.post('login.php', {\n        email,\n        password\n      });\n\n      if (data.success && data.token) {\n        localStorage.setItem('loginToken', data.token);\n        setWait(false);\n        return {\n          success: 1\n        };\n      }\n\n      setWait(false);\n      return {\n        success: 0,\n        message: data.message\n      };\n    } catch (err) {\n      setWait(false);\n      return {\n        success: 0,\n        message: 'Server Error!'\n      };\n    }\n  };\n\n  const loggedInCheck = async () => {\n    const loginToken = localStorage.getItem('loginToken');\n    Axios.defaults.headers.common['Authorization'] = 'Bearer ' + loginToken;\n\n    if (loginToken) {\n      const {\n        data\n      } = await Axios.get('getUser.php');\n\n      if (data.success && data.user) {\n        setUser(data.user);\n        return;\n      }\n\n      setUser(null);\n    }\n  };\n\n  useEffect(() => {\n    async function asyncCall() {\n      await loggedInCheck();\n    }\n\n    asyncCall();\n  }, []);\n\n  const logout = () => {\n    localStorage.removeItem('loginToken');\n    setUser(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      registerUser,\n      loginUser,\n      wait,\n      user: theUser,\n      loggedInCheck,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserContextProvider, \"KqRwzTKkuPJz6aUSTK8aCbuA0BI=\");\n\n_c = UserContextProvider;\nexport default UserContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserContextProvider\");","map":{"version":3,"names":["createContext","useState","useEffect","axios","UserContext","Axios","create","baseURL","UserContextProvider","children","theUser","setUser","wait","setWait","registerUser","name","email","password","data","post","first_name","last_name","username","err","success","message","loginUser","token","localStorage","setItem","loggedInCheck","loginToken","getItem","defaults","headers","common","get","user","asyncCall","logout","removeItem"],"sources":["C:/Users/HP/Desktop/dashboard/src/context/UserContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n\r\nexport const UserContext = createContext();\r\n\r\nexport const Axios = axios.create({\r\n    baseURL: 'http://localhost:8000/api_dashb/',\r\n});\r\n\r\nexport const UserContextProvider = ({ children }) => {\r\n\r\n    const [theUser, setUser] = useState(null);\r\n    const [wait, setWait] = useState(false);\r\n\r\n    const registerUser = async ({ name, email, password }) => {\r\n        setWait(true);\r\n        try {\r\n            const { data } = await Axios.post('register.php', {\r\n                first_name,\r\n                last_name,\r\n                email,\r\n                username,\r\n                password\r\n            });\r\n            setWait(false);\r\n            return data;\r\n        }\r\n        catch (err) {\r\n            setWait(false);\r\n            return { success: 0, message: 'Server Error!' };\r\n        }\r\n    }\r\n\r\n    const loginUser = async ({ email, password }) => {\r\n        setWait(true);\r\n        try {\r\n            const { data } = await Axios.post('login.php', {\r\n                email,\r\n                password\r\n            });\r\n            if (data.success && data.token) {\r\n                localStorage.setItem('loginToken', data.token);\r\n                setWait(false);\r\n                return { success: 1 };\r\n            }\r\n            setWait(false);\r\n            return { success: 0, message: data.message };\r\n        }\r\n        catch (err) {\r\n            setWait(false);\r\n            return { success: 0, message: 'Server Error!' };\r\n        }\r\n\r\n    }\r\n\r\n    const loggedInCheck = async () => {\r\n        const loginToken = localStorage.getItem('loginToken');\r\n        Axios.defaults.headers.common['Authorization'] = 'Bearer ' + loginToken;\r\n        if (loginToken) {\r\n            const { data } = await Axios.get('getUser.php');\r\n            if (data.success && data.user) {\r\n                setUser(data.user);\r\n                return;\r\n            }\r\n            setUser(null);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function asyncCall() {\r\n            await loggedInCheck();\r\n        }\r\n        asyncCall();\r\n    }, []);\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('loginToken');\r\n        setUser(null);\r\n    }\r\n\r\n    return (\r\n        <UserContext.Provider value={{ registerUser, loginUser, wait, user: theUser, loggedInCheck, logout }}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    );\r\n\r\n}\r\n\r\nexport default UserContextProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module"}